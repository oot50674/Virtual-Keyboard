function composeHangul(t,e,i){i=i||"";var n=HANGUL_MAPS.CHO[t],a=HANGUL_MAPS.JUNG[e],s=HANGUL_MAPS.JONG[i]||0;return null==n||null==a?t+e+i:String.fromCharCode(44032+21*n*28+28*a+s)}function createElement(t,e){e=e||{};var i=document.createElement(t);return e.id&&(i.id=e.id),e.className&&(i.className=e.className),e.textContent&&(i.textContent=e.textContent),e.type&&(i.type=e.type),i}function safeGetElement(t){try{return document.getElementById(t)}catch(e){return console.warn("Element not found:",t),null}}function HangulIME(){this.reset()}function VirtualKeyboard(t,e){e=e||{},this._initializeProperties(t,e),this._setupDOM(),this._setupEventListeners(),this.render()}function initVirtualKeyboard(t,e){e=e||{};var i={lang:e.lang||"en",showControls:e.showControls||!1,align:e.align||"center",fontSize:e.fontSize||"1.0rem"},n=document.querySelector(".controls");n&&(n.style.display=i.showControls?"flex":"none");try{var a=new VirtualKeyboard(t,i);return _setupExternalControls(a,i.lang),a}catch(t){return console.error("Failed to initialize virtual keyboard:",t),null}}function _setupExternalControls(t,e){var i=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.LANG_SELECT),n=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_SLIDER),a=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_VALUE);i&&(i.value=e,i.addEventListener("change",function(e){t.switchLanguage(e.target.value),t.isVisible||t.showKeyboard(),t.input.focus()})),n&&a&&(n.addEventListener("input",function(e){var i=e.target.value/100;t.setKeyboardSize(i)}),a.textContent=n.value+"%");var s=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_VALUE_MINI);s&&(s.textContent=n?n.value+"%":"100%")}const KEYBOARD_CONSTANTS={DOUBLE_CLICK_THRESHOLD:500,MIN_SCALE:.5,MAX_SCALE:1.5,DEFAULT_SCALE:1,SCALE_STEP:10,SELECTORS:{KEYBOARD:"keyboard",KEYBOARD_OVERLAY:"keyboard-overlay",KEYBOARD_CLOSE:"keyboard-close",KEYBOARD_RESET:"keyboard-reset",SIZE_MINUS_MINI:"size-minus-mini",SIZE_PLUS_MINI:"size-plus-mini",SIZE_VALUE_MINI:"size-value-mini",LANG_SELECT:"lang-select",SIZE_SLIDER:"size-slider",SIZE_VALUE:"size-value"},CLASSES:{KEYBOARD_OVERLAY:"keyboard-overlay",KEYBOARD_HEADER:"keyboard-header",KEYBOARD_HEADER_LEFT:"keyboard-header-left",KEYBOARD_HEADER_RIGHT:"keyboard-header-right",KEYBOARD_TRIGGER:"keyboard-trigger",SIZE_CONTROL_MINI:"size-control-mini",SIZE_BTN_MINI:"size-btn-mini",KEYBOARD_RESET_BTN:"keyboard-reset-btn",KEYBOARD_CLOSE_BTN:"keyboard-close-btn",SHOW:"show",KEY:"key",ROW:"row",SHIFT:"shift",ACTIVE:"active",LOCKED:"locked",BACKSPACE:"backspace",ENTER:"enter",LANG_TOGGLE:"lang-toggle",NUMBER:"number",PUNCTUATION:"punctuation"}},KEYBOARD_LAYOUTS={en:[["1","2","3","4","5","6","7","8","9","0","-","=","backspace"],["q","w","e","r","t","y","u","i","o","p","[","]","\\"],["a","s","d","f","g","h","j","k","l",";","'","enter"],["shift","z","x","c","v","b","n","m",",",".","/"],["space","한영"]],ko:[["1","2","3","4","5","6","7","8","9","0","-","=","backspace"],["ㅂ","ㅈ","ㄷ","ㄱ","ㅅ","ㅛ","ㅕ","ㅑ","ㅐ","ㅔ","[","]","\\"],["ㅁ","ㄴ","ㅇ","ㄹ","ㅎ","ㅗ","ㅓ","ㅏ","ㅣ",";","'","enter"],["shift","ㅋ","ㅌ","ㅊ","ㅍ","ㅠ","ㅜ","ㅡ",",",".","/"],["space","한영"]]},HANGUL_DATA={CHO:["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],JUNG:["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],JONG:["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]},HANGUL_MAPS={CHO:Object.fromEntries(HANGUL_DATA.CHO.map(function(t,e){return[t,e]})),JUNG:Object.fromEntries(HANGUL_DATA.JUNG.map(function(t,e){return[t,e]})),JONG:Object.fromEntries(HANGUL_DATA.JONG.map(function(t,e){return[t,e]}))},HANGUL_COMBINATIONS={DOUBLE_CHO:{"ㄱㄱ":"ㄲ","ㄷㄷ":"ㄸ","ㅂㅂ":"ㅃ","ㅅㅅ":"ㅆ","ㅈㅈ":"ㅉ"},DOUBLE_JUNG:{"ㅗㅏ":"ㅘ","ㅗㅐ":"ㅙ","ㅗㅣ":"ㅚ","ㅜㅓ":"ㅝ","ㅜㅔ":"ㅞ","ㅜㅣ":"ㅟ","ㅡㅣ":"ㅢ"},DOUBLE_JONG:{"ㄱㅅ":"ㄳ","ㄴㅈ":"ㄵ","ㄴㅎ":"ㄶ","ㄹㄱ":"ㄺ","ㄹㅁ":"ㄻ","ㄹㅂ":"ㄼ","ㄹㅅ":"ㄽ","ㄹㅌ":"ㄾ","ㄹㅍ":"ㄿ","ㄹㅎ":"ㅀ","ㅂㅅ":"ㅄ"},SHIFT_DOUBLE_CHO:{"ㅂ":"ㅃ","ㅈ":"ㅉ","ㄷ":"ㄸ","ㄱ":"ㄲ","ㅅ":"ㅆ"},SPLIT_JONG:{"ㄳ":["ㄱ","ㅅ"],"ㄵ":["ㄴ","ㅈ"],"ㄶ":["ㄴ","ㅎ"],"ㄺ":["ㄹ","ㄱ"],"ㄻ":["ㄹ","ㅁ"],"ㄼ":["ㄹ","ㅂ"],"ㄽ":["ㄹ","ㅅ"],"ㄾ":["ㄹ","ㅌ"],"ㄿ":["ㄹ","ㅍ"],"ㅀ":["ㄹ","ㅎ"],"ㅄ":["ㅂ","ㅅ"]}},SHIFT_SYMBOLS={1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}",";":":","'":'"',",":"<",".":">","/":"?"};HangulIME.prototype.reset=function(){this.cho="",this.jung="",this.jong=""},HangulIME.prototype.getCurrent=function(){return this.jung||this.cho?this.jung?composeHangul(this.cho||"ㅇ",this.jung,this.jong):this.cho:""},HangulIME.prototype.flush=function(){var t=this.getCurrent();return this.reset(),t},HangulIME.prototype.input=function(t){var e="",i=-1!==HANGUL_DATA.JUNG.indexOf(t);return e+=i?this._handleVowelInput(t):this._handleConsonantInput(t),e},HangulIME.prototype._handleVowelInput=function(t){var e="";if(this.jung)if(this.jong){var i=HANGUL_COMBINATIONS.SPLIT_JONG[this.jong];if(i)this.jong=i[0],e+=this.flush(),this.cho=i[1];else{var n=this.jong;this.jong="",e+=this.flush(),this.cho=n}this.jung=t}else{var a=HANGUL_COMBINATIONS.DOUBLE_JUNG[this.jung+t];a?this.jung=a:(e+=this.flush(),this.cho="ㅇ",this.jung=t)}else this.cho||(this.cho="ㅇ"),this.jung=t;return e},HangulIME.prototype._handleConsonantInput=function(t){var e="";if(this.jung)if(this.jong){i=HANGUL_COMBINATIONS.DOUBLE_JONG[this.jong+t];i?this.jong=i:(e+=this.flush(),this.cho=t)}else this.jong=t;else if(this.cho){var i=HANGUL_COMBINATIONS.DOUBLE_CHO[this.cho+t];i?this.cho=i:(e+=this.flush(),this.cho=t)}else this.cho=t;return e},VirtualKeyboard.prototype._initializeProperties=function(t,e){if(this.input=safeGetElement(t),!this.input)throw new Error('Input element with id "'+t+'" not found');this.lang=e.lang||"en",this.fontSize=e.fontSize||"1.0rem",this.align=e.align||"center",this.hangul=new HangulIME,this.isShift=!1,this.isShiftLocked=!1,this.lastShiftClickTime=0,this.ignoreInput=!1,this.output="",this.keyboardScale=KEYBOARD_CONSTANTS.DEFAULT_SCALE,this.isVisible=!1,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.keyboardStartX=0,this.keyboardStartY=0,this.isDragMode=!1;var i=this;window.addEventListener("resize",function(){i.isVisible&&!i.isDragMode&&i.positionKeyboard()})},VirtualKeyboard.prototype._setupDOM=function(){this.container=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD),this.overlay=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_OVERLAY),this.overlay||this._createKeyboardOverlay(),this.container||(this.container=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD)),this.triggerElement=this._findTriggerElement(),this.useIconTrigger=!!this.triggerElement,this._setupTrigger()},VirtualKeyboard.prototype._createKeyboardOverlay=function(){this.overlay=createElement("div",{id:KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_OVERLAY,className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_OVERLAY});var t=this._createKeyboardHeader();this.container=createElement("div",{id:KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD}),this.overlay.appendChild(t),this.overlay.appendChild(this.container),document.body.appendChild(this.overlay)},VirtualKeyboard.prototype._createKeyboardHeader=function(){var t=createElement("div",{className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_HEADER});t.style.cursor="move",t.setAttribute("title","드래그하여 키보드 이동");var e=createElement("div",{className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_HEADER_LEFT}),i=this._createSizeControl(),n=createElement("button",{id:KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_RESET,className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_RESET_BTN,textContent:"초기화"});e.appendChild(i),e.appendChild(n);var a=createElement("div",{className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_HEADER_RIGHT}),s=createElement("button",{id:KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_CLOSE,className:KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_CLOSE_BTN,textContent:"×"});return a.appendChild(s),t.appendChild(e),t.appendChild(a),this._setupDragEvents(t),t},VirtualKeyboard.prototype._createSizeControl=function(){var t=createElement("div",{className:KEYBOARD_CONSTANTS.CLASSES.SIZE_CONTROL_MINI}),e=createElement("button",{id:KEYBOARD_CONSTANTS.SELECTORS.SIZE_MINUS_MINI,className:KEYBOARD_CONSTANTS.CLASSES.SIZE_BTN_MINI,type:"button",textContent:"-"}),i=createElement("span",{id:KEYBOARD_CONSTANTS.SELECTORS.SIZE_VALUE_MINI,textContent:"100%"}),n=createElement("button",{id:KEYBOARD_CONSTANTS.SELECTORS.SIZE_PLUS_MINI,className:KEYBOARD_CONSTANTS.CLASSES.SIZE_BTN_MINI,type:"button",textContent:"+"});return t.appendChild(e),t.appendChild(i),t.appendChild(n),t},VirtualKeyboard.prototype._findTriggerElement=function(){var t=this.input.parentElement;if(!t)return null;for(var e=t.children,i=0;i<e.length;i++){var n=e[i];if(n!==this.input&&n.classList.contains(KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_TRIGGER))return n}return t.querySelector("."+KEYBOARD_CONSTANTS.CLASSES.KEYBOARD_TRIGGER)},VirtualKeyboard.prototype._setupTrigger=function(){if(this.useIconTrigger&&this.triggerElement){var t=this;this.triggerElement.addEventListener("click",function(e){e.stopPropagation(),t.isVisible?t.hideKeyboard():(t.showKeyboard(),t.input.focus())})}},VirtualKeyboard.prototype._setupEventListeners=function(){var t=this;this.useIconTrigger||this.input.addEventListener("focus",function(){t.showKeyboard()}),this._setupControlButtons(),this._setupGlobalEvents()},VirtualKeyboard.prototype._setupControlButtons=function(){var t=this,e=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_CLOSE);e&&e.addEventListener("click",function(e){e.stopPropagation(),t.hideKeyboard()});var i=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.KEYBOARD_RESET);i&&i.addEventListener("click",function(e){e.stopPropagation(),t.resetInput()});var n=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_MINUS_MINI),a=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_PLUS_MINI);n&&a&&(n.addEventListener("click",function(e){e.stopPropagation(),t.adjustKeyboardSize(-KEYBOARD_CONSTANTS.SCALE_STEP)}),a.addEventListener("click",function(e){e.stopPropagation(),t.adjustKeyboardSize(KEYBOARD_CONSTANTS.SCALE_STEP)}))},VirtualKeyboard.prototype._setupGlobalEvents=function(){var t=this;document.addEventListener("click",function(e){var i=e.target.closest('.key[data-key="한영"]');t.input.contains(e.target)||t.overlay.contains(e.target)||i||t.hideKeyboard()}),this.input.addEventListener("input",function(){t.ignoreInput||(t.hangul.reset(),t.output=t.input.value)}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(t.hideKeyboard(),t.input.blur())})},VirtualKeyboard.prototype.showKeyboard=function(){this.isVisible=!0,this.overlay.classList.add(KEYBOARD_CONSTANTS.CLASSES.SHOW),this.positionKeyboard()},VirtualKeyboard.prototype.hideKeyboard=function(){this.isVisible=!1,this.overlay.classList.remove(KEYBOARD_CONSTANTS.CLASSES.SHOW)},VirtualKeyboard.prototype.positionKeyboard=function(){this.isDragMode||("center"===this.align?this._positionCenter():this._positionAligned())},VirtualKeyboard.prototype._positionCenter=function(){var t=this.input.getBoundingClientRect(),e=t.left+t.width/2;this.overlay.style.left=e+"px",this.overlay.style.transform="translateX(-50%)",this.overlay.style.top=t.bottom+2+"px"},VirtualKeyboard.prototype._positionAligned=function(){var t=this.input.getBoundingClientRect(),e=t.left,i=t.width,n=this.overlay.offsetWidth,a=0;"left"===this.align?a=e:"right"===this.align&&(a=e+i-n);var s=window.innerWidth-n;a<0?a=0:a>s&&(a=s),this.overlay.style.left=a+"px",this.overlay.style.transform="translateX(0)",this.overlay.style.top=t.bottom+2+"px"},VirtualKeyboard.prototype._setupDragEvents=function(t){var e=this;t.addEventListener("mousedown",function(t){e._startDrag(t,t.clientX,t.clientY)}),document.addEventListener("mousemove",function(t){e.isDragging&&e._onDrag(t.clientX,t.clientY)}),document.addEventListener("mouseup",function(){e._endDrag()}),t.addEventListener("touchstart",function(t){t.preventDefault();var i=t.touches[0];e._startDrag(t,i.clientX,i.clientY)}),document.addEventListener("touchmove",function(t){if(e.isDragging){t.preventDefault();var i=t.touches[0];e._onDrag(i.clientX,i.clientY)}},{passive:!1}),document.addEventListener("touchend",function(){e._endDrag()})},VirtualKeyboard.prototype._startDrag=function(t,e,i){if("BUTTON"!==t.target.tagName){this.isDragging=!0,this.isDragMode=!0,this.dragStartX=e,this.dragStartY=i;var n=this.overlay.getBoundingClientRect();this.keyboardStartX=n.left,this.keyboardStartY=n.top,this.overlay.style.transition="none",this.overlay.style.userSelect="none",document.body.style.userSelect="none",t.preventDefault()}},VirtualKeyboard.prototype._onDrag=function(t,e){if(this.isDragging){var i=t-this.dragStartX,n=e-this.dragStartY,a=this.keyboardStartX+i,s=this.keyboardStartY+n,r=window.innerWidth-this.overlay.offsetWidth,o=window.innerHeight-this.overlay.offsetHeight;a=Math.max(0,Math.min(a,r)),s=Math.max(0,Math.min(s,o)),this.overlay.style.left=a+"px",this.overlay.style.top=s+"px",this.overlay.style.transform="none"}},VirtualKeyboard.prototype._endDrag=function(){this.isDragging&&(this.isDragging=!1,this.overlay.style.transition="",this.overlay.style.userSelect="",document.body.style.userSelect="")},VirtualKeyboard.prototype.render=function(){this.container.innerHTML="",this.container.className="keyboard",this.container.style.setProperty("--keyboard-scale",this.keyboardScale),this.container.style.setProperty("--keyboard-font-size",this.fontSize),this._renderKeyboard()},VirtualKeyboard.prototype._renderKeyboard=function(){var t=KEYBOARD_LAYOUTS[this.lang],e=this;t.forEach(function(t){var i=e._createKeyboardRow(t);e.container.appendChild(i)})},VirtualKeyboard.prototype._createKeyboardRow=function(t){var e=createElement("div",{className:KEYBOARD_CONSTANTS.CLASSES.ROW}),i=this;return t.forEach(function(t){var n=i._createKeyButton(t);e.appendChild(n)}),e},VirtualKeyboard.prototype._createKeyButton=function(t){var e=createElement("button",{className:KEYBOARD_CONSTANTS.CLASSES.KEY});e.setAttribute("data-key",t),this._addKeyClasses(e,t);var i=this._getKeyDisplayText(t);e.textContent=i;var n=this;return e.onclick=function(e){e.stopPropagation(),n.handleKey(t)},e},VirtualKeyboard.prototype._addKeyClasses=function(t,e){var i=KEYBOARD_CONSTANTS.CLASSES;"shift"===e&&(t.classList.add(i.SHIFT),t.classList.toggle(i.ACTIVE,this.isShift),this.isShiftLocked&&t.classList.add(i.LOCKED)),"backspace"===e&&t.classList.add(i.BACKSPACE),"enter"===e&&t.classList.add(i.ENTER),"한영"===e&&t.classList.add(i.LANG_TOGGLE),/[0-9]/.test(e)&&t.classList.add(i.NUMBER),/[\-=\[\];',.\\/]/.test(e)&&t.classList.add(i.PUNCTUATION)},VirtualKeyboard.prototype._getKeyDisplayText=function(t){if("space"===t)return"␣";if("shift"===t)return"Shift";if("backspace"===t)return"←";if("enter"===t)return"Enter";if("한영"===t)return"ko"===this.lang?"En":"한";if(this.isShift){if("ko"===this.lang&&HANGUL_COMBINATIONS.SHIFT_DOUBLE_CHO[t])return HANGUL_COMBINATIONS.SHIFT_DOUBLE_CHO[t];if(SHIFT_SYMBOLS[t])return SHIFT_SYMBOLS[t];if("en"===this.lang&&/[a-z]/.test(t))return t.toUpperCase()}return t},VirtualKeyboard.prototype.handleKey=function(t){switch(t){case"shift":this._handleShiftKey();break;case"backspace":this._handleBackspaceKey();break;case"enter":this._handleEnterKey();break;case"한영":this._handleLanguageToggleKey();break;default:this._handleRegularKey(t)}this._maintainKeyboardFocus()},VirtualKeyboard.prototype._handleShiftKey=function(){var t=Date.now(),e=t-this.lastShiftClickTime;e<KEYBOARD_CONSTANTS.DOUBLE_CLICK_THRESHOLD&&e>0?(this.isShiftLocked=!this.isShiftLocked,this.isShift=this.isShiftLocked):this.isShiftLocked?(this.isShiftLocked=!1,this.isShift=!1):this.isShift=!this.isShift,this.lastShiftClickTime=t,this.render()},VirtualKeyboard.prototype._handleBackspaceKey=function(){"ko"===this.lang?this._handleKoreanBackspace():this._handleEnglishBackspace()},VirtualKeyboard.prototype._handleKoreanBackspace=function(){var t=this.hangul.getCurrent();t?(this.hangul.jong?this.hangul.jong="":this.hangul.jung?this.hangul.jung="":this.hangul.cho&&"ㅇ"!==this.hangul.cho?this.hangul.cho="":this.hangul.reset(),this._updateInputValue(this.output+this.hangul.getCurrent())):this.output.length>0&&(this.output=this.output.slice(0,-1),this._updateInputValue(this.output))},VirtualKeyboard.prototype._handleEnglishBackspace=function(){this.input.value.length>0&&this._updateInputValue(this.input.value.slice(0,-1))},VirtualKeyboard.prototype._handleEnterKey=function(){"ko"===this.lang?(this.output+=this.hangul.flush()+"\n",this._updateInputValue(this.output)):this._updateInputValue(this.input.value+"\n")},VirtualKeyboard.prototype._handleLanguageToggleKey=function(){var t="ko"===this.lang?"en":"ko";this.switchLanguage(t);var e=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.LANG_SELECT);e&&(e.value=t);var i=this;setTimeout(function(){i.showKeyboard()},0)},VirtualKeyboard.prototype._handleRegularKey=function(t){"ko"===this.lang?this._handleKoreanInput(t):this._handleEnglishInput(t)},VirtualKeyboard.prototype._handleKoreanInput=function(t){if(/[0-9\-=\[\];',.\\/]/.test(t)){var e=t;this.isShift&&SHIFT_SYMBOLS[t]&&(e=SHIFT_SYMBOLS[t]),this.output+=this.hangul.flush(),this.output+=e,this._updateInputValue(this.output),this._handleShiftAfterInput()}else this.isShift&&"space"!==t&&(t=HANGUL_COMBINATIONS.SHIFT_DOUBLE_CHO[t]||t,this.isShiftLocked||(this.isShift=!1,this.render())),this.output+="space"===t?this.hangul.flush()+" ":this.hangul.input(t),this._updateInputValue(this.output+this.hangul.getCurrent())},VirtualKeyboard.prototype._handleEnglishInput=function(t){if("space"===t)this._updateInputValue(this.input.value+" ");else{var e=t;this.isShift&&(e=SHIFT_SYMBOLS[t]?SHIFT_SYMBOLS[t]:t.toUpperCase()),this._updateInputValue(this.input.value+e),this._handleShiftAfterInput()}},VirtualKeyboard.prototype._handleShiftAfterInput=function(){this.isShift&&!this.isShiftLocked&&(this.isShift=!1,this.render())},VirtualKeyboard.prototype._updateInputValue=function(t){this.ignoreInput=!0,this.input.value=t,this.ignoreInput=!1},VirtualKeyboard.prototype._maintainKeyboardFocus=function(){this.input.focus(),this.isVisible||this.showKeyboard()},VirtualKeyboard.prototype.switchLanguage=function(t){KEYBOARD_LAYOUTS[t]&&("ko"===this.lang?(this.output+=this.hangul.flush(),this.input.value=this.output):this.output=this.input.value,this.lang=t,this.isShift=!1,this.isShiftLocked=!1,this.render(),this.isVisible&&this.showKeyboard())},VirtualKeyboard.prototype.setKeyboardSize=function(t){t=Math.max(KEYBOARD_CONSTANTS.MIN_SCALE,Math.min(KEYBOARD_CONSTANTS.MAX_SCALE,t)),this.keyboardScale=t,this.container.style.setProperty("--keyboard-scale",t),this.container.style.setProperty("--keyboard-font-size",this.fontSize),this._syncSizeValues(t)},VirtualKeyboard.prototype._syncSizeValues=function(t){var e=Math.round(100*t)+"%",i=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_VALUE_MINI);i&&(i.textContent=e);var n=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_SLIDER),a=safeGetElement(KEYBOARD_CONSTANTS.SELECTORS.SIZE_VALUE);n&&a&&(n.value=Math.round(100*t),a.textContent=e)},VirtualKeyboard.prototype.adjustKeyboardSize=function(t){var e=100*this.keyboardScale+t;this.setKeyboardSize(e/100)},VirtualKeyboard.prototype.resetInput=function(){this.hangul.reset(),this.output="",this._updateInputValue(""),this.isShift=!1,this.isShiftLocked=!1,this.isDragMode=!1,this.positionKeyboard(),this.render(),this.input.focus()};